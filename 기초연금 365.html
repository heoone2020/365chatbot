<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê¸°ì´ˆì—°ê¸ˆ 365 (ê³ í’ˆì§ˆ ë‹µë³€í˜•)</title>
    <style>
        /* 1. í°íŠ¸: í˜ì´í¼ë¡œì§€ (ê°€ë…ì„± ìµœì í™”) */
        @font-face {
            font-family: 'Paperlogy';
            src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/2408-3@1.0/Paperlogy-5Medium.woff2') format('woff2');
            font-weight: 500;
        }
        @font-face {
            font-family: 'Paperlogy-Bold';
            src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/2408-3@1.0/Paperlogy-7Bold.woff2') format('woff2');
            font-weight: 700;
        }
        
        body {
            font-family: 'Paperlogy', sans-serif;
            background-color: #FFFDF7; 
            background-image: radial-gradient(#E5E0D0 1.5px, transparent 1.5px);
            background-size: 24px 24px;
            margin: 0;
            display: flex;
            justify-content: center;
            height: 100vh;
            overflow: hidden;
        }

        .app-container {
            width: 100%;
            max-width: 500px;
            background: #ffffff;
            display: flex;
            flex-direction: column;
            box-shadow: 0 10px 30px rgba(100, 90, 80, 0.1); 
            border-left: 1px solid #f0f0f0;
            border-right: 1px solid #f0f0f0;
        }

        .header {
            padding: 20px;
            padding-top: 40px;
            background-color: #ffffff;
            border-bottom: 2px dashed #eee;
            text-align: center;
            z-index: 10;
        }
        .header-title {
            font-family: 'Paperlogy-Bold', sans-serif;
            font-size: 1.6rem;
            color: #FF8C00;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        .header-subtitle {
            font-size: 0.95rem;
            color: #888;
            margin-top: 5px;
        }

        .chat-box {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background-color: #FFFDF9;
            scroll-behavior: smooth;
        }

        .msg-row {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
            width: 100%;
        }
        .msg-row.user {
            justify-content: flex-end;
        }

        .bot-icon {
            width: 42px;
            height: 42px;
            background-color: #FFF4E0;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-right: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            flex-shrink: 0;
        }

        .message {
            max-width: 75%;
            padding: 14px 18px;
            border-radius: 20px;
            font-size: 1.05rem;
            line-height: 1.6;
            position: relative;
            word-break: break-word;
            box-shadow: 0 2px 4px rgba(0,0,0,0.03);
        }
        
        .bot-message {
            background-color: #ffffff;
            color: #4a4a4a;
            border: 1px solid #f0f0f0;
            border-top-left-radius: 4px;
        }

        .user-message {
            background-color: #FFB347;
            color: white;
            border-top-right-radius: 4px;
        }

        .thought-container {
            width: 100%;
            display: flex;
            padding-left: 55px;
            margin-bottom: 5px;
        }
        .thought-bubble {
            background-color: #F0F7FF;
            color: #6A9CFF;
            font-size: 0.85rem;
            font-weight: 600;
            padding: 6px 14px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            gap: 6px;
            animation: float 2s infinite ease-in-out;
        }

        /* ë©”ë‰´ ê·¸ë¦¬ë“œ */
        .menu-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-top: 10px;
            width: 100%;
        }
        .category-btn {
            background: #FFF4E0;
            color: #D97706;
            border: 1px solid #FFE0B2;
            padding: 12px;
            border-radius: 12px;
            font-family: 'Paperlogy', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            text-align: center;
        }
        .category-btn:hover { background: #FFD180; }
        
        .question-list {
            display: flex;
            flex-direction: column;
            gap: 6px;
            margin-top: 10px;
            width: 100%;
        }
        .q-btn {
            background: #ffffff;
            border: 1px solid #ddd;
            padding: 12px; /* í„°ì¹˜ ì˜ì—­ í™•ëŒ€ */
            border-radius: 10px;
            text-align: left;
            font-family: 'Paperlogy', sans-serif;
            font-size: 1rem; /* í°íŠ¸ í‚¤ì›€ */
            cursor: pointer;
            color: #333;
            line-height: 1.4;
        }
        .q-btn:hover { background: #f5f5f5; border-color: #FFB347; }
        .q-btn-special {
            background: #FFF0F0;
            border: 1px solid #FFCDCD;
            color: #D32F2F;
            font-weight: bold;
            text-align: center;
            margin-top: 5px;
        }

        /* í•˜ë‹¨ ê³ ì • ë©”ë‰´ */
        .fixed-menu {
            padding: 12px 15px;
            background: #ffffff;
            border-top: 1px solid #eee;
            display: flex;
            gap: 8px;
            overflow-x: auto;
        }
        .fixed-menu::-webkit-scrollbar { display: none; }

        .menu-btn {
            font-family: 'Paperlogy', sans-serif;
            flex: 1;
            background: #EBF4FF;
            color: #0055FF;
            border: 1px solid #CCE0FF;
            padding: 12px 10px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 600;
            white-space: nowrap;
            min-width: fit-content;
        }
        .menu-btn:hover { background: #D6E4FF; }

        .input-area {
            padding: 15px;
            background: white;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        input[type="text"] {
            flex: 1;
            padding: 15px;
            font-family: 'Paperlogy', sans-serif;
            font-size: 1rem;
            border: 2px solid #eee;
            border-radius: 25px;
            outline: none;
            background-color: #fafafa;
        }
        .send-btn {
            background-color: #FFB347;
            color: white;
            border: none;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-3px); }
            100% { transform: translateY(0px); }
        }
    </style>
</head>
<body>

<div class="app-container">
    <div class="header">
        <h1 class="header-title">ğŸ¥ ê¸°ì´ˆì—°ê¸ˆ 365</h1>
        <div class="header-subtitle">ì‰½ê³  ì¹œì ˆí•˜ê²Œ ì•Œë ¤ë“œë ¤ìš”!</div>
    </div>

    <div class="chat-box" id="chatBox"></div>

    <div class="fixed-menu" id="menuArea">
        <button class="menu-btn" onclick="sendMenu('ë‚˜ëŠ” ì–¼ë§ˆë‚˜ ë°›ì„ ìˆ˜ ìˆì–´?')">ğŸ’° ë‚˜ëŠ” ì–¼ë§ˆë‚˜ ë°›ì„ ìˆ˜ ìˆì–´?</button>
        <button class="menu-btn" onclick="showCategories()">ğŸ“š ì§ˆë¬¸ ëª©ë¡ ë³´ì—¬ì¤˜</button>
    </div>

    <div class="input-area">
        <input type="text" id="userInput" placeholder="ê¶ê¸ˆí•œ ë‹¨ì–´ë¥¼ ì ì–´ë³´ì„¸ìš” (ì˜ˆ: ë¹š, í†µì¥)" onkeypress="if(event.keyCode==13) sendMessage()">
        <button class="send-btn" onclick="sendMessage()">
            <svg viewBox="0 0 24 24" width="22" height="22" fill="white"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
        </button>
    </div>
</div>

<script>
    const chatBox = document.getElementById('chatBox');
    const LIMIT_SINGLE = 2280000;
    const LIMIT_COUPLE = 3648000;

    let step = 0; 
    let userType = ''; 

    // â˜… [ë‹µë³€ ë°ì´í„°ë² ì´ìŠ¤] - 99% ë¶ˆë§Œì¡± í•´ê²°ì„ ìœ„í•œ ê³ í’ˆì§ˆ ë‹µë³€ ì ìš©
    const categories = {
        "ëŒ€ìƒ/ìê²©": [
            { q: "ëª‡ ì‚´ë¶€í„° ë°›ì„ ìˆ˜ ìˆì–´?", a: "ë§Œ 65ì„¸ ìƒì¼ì´ ì§€ë‚˜ì…”ì•¼ í•©ë‹ˆë‹¤.<br>ì˜¬í•´(2025ë…„)ëŠ” <b>1960ë…„ìƒ</b>ì´ì‹  ë¶„ë“¤ì´ ìƒì¼ ì§€ë‚˜ë©´ ëŒ€ìƒìê°€ ë˜ì‹­ë‹ˆë‹¤! ğŸ‚<br>ì•„ì§ ìƒì¼ ì „ì´ì‹œë©´ ì¡°ê¸ˆë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.", thought: "ë‚˜ì´ ê¸°ì¤€ ì•ˆë‚´" },
            { q: "ìì‹ë“¤ì´ ëˆì„ ì˜ ë²„ëŠ”ë°?", a: "<b>ì „í˜€ ê±±ì •í•˜ì§€ ë§ˆì„¸ìš”!</b> ğŸ™…â€â™‚ï¸<br>ê¸°ì´ˆì—°ê¸ˆì€ ìë…€ ì†Œë“ì„ <b>ì „í˜€ ë³´ì§€ ì•ŠìŠµë‹ˆë‹¤.</b><br>ì˜¤ì§ ì–´ë¥´ì‹ ê³¼ ë°°ìš°ìë¶„ì˜ í˜•í¸ë§Œ ë´…ë‹ˆë‹¤. ì •ë§ ë‹¤í–‰ì´ì£ ? ğŸ˜Š", thought: "ë¶€ì–‘ì˜ë¬´ì ê¸°ì¤€ íì§€ ì•ˆë‚´" },
            { q: "ê³µë¬´ì› ì—°ê¸ˆì„ ë°›ê³  ìˆëŠ”ë°?", a: "ì•„ì‰½ê²Œë„ ê³µë¬´ì›, ì‚¬í•™, êµ°ì¸, ìš°ì²´êµ­ ì—°ê¸ˆ ìˆ˜ê¸‰ìë¶„ë“¤ì€ <b>ì›ì¹™ì ìœ¼ë¡œ ëŒ€ìƒì—ì„œ ì œì™¸</b>ë˜ì‹­ë‹ˆë‹¤. ğŸ˜¢<br>ë²•ì ìœ¼ë¡œ ì •í•´ì§„ ê±°ë¼ ì–´ì©” ìˆ˜ê°€ ì—†ìŠµë‹ˆë‹¤.", thought: "ì§ì—­ì—°ê¸ˆ ì œì™¸ ì•ˆë‚´" },
            { q: "ê¸°ì´ˆìƒí™œìˆ˜ê¸‰ìë„ ì¤˜?", a: "ì‹ ì²­ì€ ê°€ëŠ¥í•˜ì§€ë§Œ, <b>ë°›ìœ¼ì‹  ë§Œí¼ ìƒê³„ê¸‰ì—¬ê°€ ê¹ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</b><br>ì˜¤íˆë ¤ ì†í•´ë¥¼ ë³´ì‹¤ ìˆ˜ë„ ìˆìœ¼ë‹ˆ, ì‹ ì²­ ì „ì— ê¼­! ë³µì§€ ë‹´ë‹¹ìì™€ ìƒì˜í•˜ì…”ì•¼ í•©ë‹ˆë‹¤. ğŸš¨", thought: "ê¸°ì´ˆìˆ˜ê¸‰ ì¤‘ë³µ ê°ì•¡ ê²½ê³ " },
            { q: "ì£¼ì†ŒëŠ” ìë…€ ì§‘, ì‹¤ì œë¡  ë”°ë¡œ ì‚¬ëŠ”ë°?", a: "ê¸°ì´ˆì—°ê¸ˆì€ <b>'ì‹¤ì œë¡œ ì–´ë”” ì‚¬ëŠëƒ'</b>ê°€ ì¤‘ìš”í•©ë‹ˆë‹¤.<br>í•˜ì§€ë§Œ ì„œë¥˜ìƒ ì£¼ì†Œì™€ ë‹¤ë¥´ë©´ ì˜¤í•´ë¥¼ ì‚´ ìˆ˜ ìˆìœ¼ë‹ˆ, <b>ì‹¤ê±°ì£¼ì§€ ê´€í•  ì£¼ë¯¼ì„¼í„°</b>ì— ê°€ì…”ì„œ ìƒí™©ì„ ì†”ì§í•˜ê²Œ ë§ì”€í•˜ì‹œê³  ìƒë‹´ë°›ëŠ” ê²Œ ê°€ì¥ ì•ˆì „í•©ë‹ˆë‹¤.", thought: "ì‹¤ê±°ì£¼ ì›ì¹™ ë° ìƒë‹´ ìœ ë„" }
        ],
        "ì¬ì‚°/ì†Œë“": [
            { q: "ë¹š(ëŒ€ì¶œ)ì´ ìˆìœ¼ë©´?", a: "ë„¤! ì€í–‰ ë¹šì€ <b>ì¬ì‚°ì—ì„œ ë¹¼ë“œë¦½ë‹ˆë‹¤(ê³µì œ).</b> ğŸ“‰<br>ëŒ€ì¶œê¸ˆì´ ìˆìœ¼ë©´ ì¬ì‚°ì´ ì ê²Œ ì¡í˜€ì„œ ë°›ìœ¼ì‹¤ í™•ë¥ ì´ ì˜¬ë¼ê°‘ë‹ˆë‹¤.<br>ë‹¨, ê°œì¸ë¼ë¦¬ ì£¼ê³ ë°›ì€ ì‚¬ì±„ëŠ” ì¸ì •ë°›ê¸° ì–´ë ¤ìš°ë‹ˆ ì°¸ê³ í•´ ì£¼ì„¸ìš”.", thought: "ë¶€ì±„ ê³µì œ í˜œíƒ ê°•ì¡°" },
            { q: "ìë…€ ì§‘ì—ì„œ ê°™ì´ ì‚¬ëŠ”ë°?", a: "ìë…€ ëª…ì˜ì˜ ì§‘ì€ <b>ì–´ë¥´ì‹  ì¬ì‚°ì´ ì•„ë‹™ë‹ˆë‹¤!</b> ì•ˆì‹¬í•˜ì„¸ìš”.<br>ë‹¤ë§Œ, ê·¸ ì§‘ì´ ì‹œê°€ 6ì–µ ì›ì´ ë„˜ëŠ” ê³ ê°€ë¼ë©´ 'ê³µì§œë¡œ ì‚¬ì‹œëŠ” ì´ë“(ë¬´ë£Œì„ì°¨ì†Œë“)'ì„ ì›” ì†Œë“ìœ¼ë¡œ ì¡°ê¸ˆ ì¡ê¸´ í•©ë‹ˆë‹¤.", thought: "ìë…€ ì£¼íƒ ê±°ì£¼ ì•ˆë‚´" },
            { q: "ìë™ì°¨ê°€ ìˆëŠ”ë° ê´œì°®ì•„?", a: "ì¼ë°˜ì ì¸ ìŠ¹ìš©ì°¨ëŠ” ê´œì°®ìŠµë‹ˆë‹¤! ğŸš—<br>í•˜ì§€ë§Œ <b>4,000ë§Œ ì› ì´ìƒì˜ ê³ ê¸‰ì°¨</b>ê±°ë‚˜ ë°°ê¸°ëŸ‰ì´ 3,000ccê°€ ë„˜ìœ¼ë©´ íƒˆë½í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>ì˜¤ë˜ëœ ì°¨ë‚˜ ìƒì—…ìš© íŠ¸ëŸ­ì€ ê´œì°®ìŠµë‹ˆë‹¤.", thought: "ê³ ê¸‰ ìŠ¹ìš©ì°¨ ê¸°ì¤€ ì•ˆë‚´" },
            { q: "ì§‘ì´ ìˆì–´ë„ ë¼?", a: "ë„¤, ì§‘ì´ ìˆì–´ë„ ë°›ìœ¼ì‹œëŠ” ë¶„ë“¤ ë§ìŠµë‹ˆë‹¤!<br><b>ê¸°ë³¸ì ìœ¼ë¡œ ì§‘ê°’ì—ì„œ ì¼ì • ê¸ˆì•¡(ìµœëŒ€ 1ì–µ 3,500ë§Œ ì›)ì„ ë¹¼ì£¼ê¸° ë•Œë¬¸</b>ì…ë‹ˆë‹¤.<br>ë„ˆë¬´ ê±±ì • ë§ê³  ì¼ë‹¨ ì‹ ì²­í•´ ë³´ì‹œëŠ” ê±¸ ì¶”ì²œë“œë ¤ìš”!", thought: "ê¸°ë³¸ì¬ì‚° ê³µì œ ì•ˆë‚´" },
            { q: "í†µì¥ì— ëˆì´ ì¢€ ìˆëŠ”ë°?", a: "ì€í–‰ ì˜ˆê¸ˆì€ <b>2,000ë§Œ ì›ê¹Œì§€ëŠ” ì—†ëŠ” ì…ˆ ì³ë“œë¦½ë‹ˆë‹¤.</b> (ê³µì œ)<br>2ì²œë§Œ ì› ë„˜ëŠ” ê¸ˆì•¡ë§Œ ì†Œë“ìœ¼ë¡œ ê³„ì‚°ë˜ë‹ˆ, ë¹„ìƒê¸ˆ ì •ë„ëŠ” ê´œì°®ìŠµë‹ˆë‹¤! ğŸ’°", thought: "ê¸ˆìœµì¬ì‚° ê³µì œ ì•ˆë‚´" }
        ],
        "ì‹ ì²­/ë°©ë²•": [
            { q: "ì–´ë””ë¡œ ì‹ ì²­í•˜ëŸ¬ ê°€?", a: "ê°€ì¥ ê°€ê¹Œìš´ <b>í–‰ì •ë³µì§€ì„¼í„°(ì£¼ë¯¼ì„¼í„°)</b>ë‚˜ <b>êµ­ë¯¼ì—°ê¸ˆê³µë‹¨ ì§€ì‚¬</b>ë¡œ ê°€ì‹œë©´ ë©ë‹ˆë‹¤.<br>ê°€ì‹¤ ë•Œ <b>ì‹ ë¶„ì¦</b>ì´ë‘ <b>ë³¸ì¸ í†µì¥</b> ê¼­ ì±™ê²¨ê°€ì„¸ìš”! ğŸƒâ€â™‚ï¸", thought: "ì‹ ì²­ ì¥ì†Œ ì•ˆë‚´" },
            { q: "ëª¸ì´ ë¶ˆí¸í•´ì„œ ëª» ê°€ëŠ”ë°?", a: "ê±±ì • ë§ˆì„¸ìš”! ìë…€ë¶„ì´ë‚˜ ë°°ìš°ìê°€ <b>ëŒ€ì‹  ì‹ ì²­(ëŒ€ë¦¬ ì‹ ì²­)</b>í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>ëŒ€ë¦¬ì¸ ì‹ ë¶„ì¦ê³¼ ì–´ë¥´ì‹  ë„ì¥ì„ ì±™ê²¨ì„œ ë°©ë¬¸í•´ ì£¼ì„¸ìš”.", thought: "ëŒ€ë¦¬ ì‹ ì²­ ì•ˆë‚´" },
            { q: "ì´ì‚¬ ê°”ëŠ”ë° ë‹¤ì‹œ ì‹ ì²­í•´?", a: "ì•„ë‹ˆìš”! <b>ì „ì…ì‹ ê³ ë§Œ í•˜ì‹œë©´ ìë™ìœ¼ë¡œ ì—°ê²°</b>ë©ë‹ˆë‹¤.<br>ë²ˆê±°ë¡­ê²Œ ë‹¤ì‹œ ì‹ ì²­í•˜ì‹¤ í•„ìš” ì—†ìŠµë‹ˆë‹¤. í¸í•˜ê²Œ ê³„ì‹œë©´ ë©ë‹ˆë‹¤! ğŸ ", thought: "ì „ì… ì—°ê³„ ì•ˆë‚´" },
            { q: "ì¸í„°ë„·ìœ¼ë¡œë„ ë¼?", a: "ë„¤, ìë…€ë¶„ë“¤ì´ <b>'ë³µì§€ë¡œ'</b> ì‚¬ì´íŠ¸ì—ì„œ ëŒ€ì‹  í•´ë“œë¦´ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.<br>í•˜ì§€ë§Œ ì„œë¥˜ ë‚¼ ê²Œ ë³µì¡í•  ìˆ˜ ìˆìœ¼ë‹ˆ, ì£¼ë¯¼ì„¼í„° ë°©ë¬¸ì´ ê°€ì¥ í™•ì‹¤í•˜ê¸´ í•©ë‹ˆë‹¤.", thought: "ì˜¨ë¼ì¸ ì‹ ì²­ ì•ˆë‚´" },
            { q: "ê²°ê³¼ê°€ ë¶ˆë§Œì¡±ìŠ¤ëŸ¬ìš°ë©´?", a: "ì–µìš¸í•˜ì‹œë‹¤ë©´ <b>'ì´ì˜ì‹ ì²­'</b>ì„ í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤!<br>ê²°ê³¼ í†µì§€ì„œ ë°›ê³  <b>90ì¼ ì´ë‚´</b>ì— ì£¼ë¯¼ì„¼í„° ê°€ì„œ 'ë‹¤ì‹œ ì‹¬ì‚¬í•´ì£¼ì„¸ìš”'ë¼ê³  ìš”ì²­í•˜ì‹œë©´ ë©ë‹ˆë‹¤. í¬ê¸°í•˜ì§€ ë§ˆì„¸ìš”! ğŸ’ª", thought: "ê¶Œë¦¬ êµ¬ì œ ì ˆì°¨ ì•ˆë‚´" }
        ],
        "ê¸ˆì•¡/ì§€ê¸‰": [
            { q: "ë¶€ë¶€ê°€ ë‘˜ ë‹¤ ë°›ìœ¼ë©´?", a: "ë‘ ë¶„ ë‹¤ ë°›ìœ¼ì‹œë©´ <b>ê°ê° 20%ì”© ê¹ì•„ì„œ</b> ë“œë¦½ë‹ˆë‹¤.<br>ê·¸ë˜ë„ ë‘ ë¶„ í•©ì¹˜ë©´ í•œ ë‹¬ì— 50ë§Œ ì›ì´ í›Œì© ë„˜ìœ¼ë‹ˆ, í•œ ë¶„ë§Œ ë°›ëŠ” ê²ƒë³´ë‹¤ í›¨ì”¬ ì´ë“ì…ë‹ˆë‹¤! ğŸ’‘", thought: "ë¶€ë¶€ ê°ì•¡ ì•ˆë‚´" },
            { q: "ëˆì€ ì–¸ì œ ë“¤ì–´ì™€?", a: "ë§¤ë‹¬ <b>25ì¼</b>ì— í†µì¥ìœ¼ë¡œ ëµë™! í•˜ê³  ë“¤ì–´ì˜µë‹ˆë‹¤. ğŸ“…<br>ë§Œì•½ 25ì¼ì´ í† ìš”ì¼ì´ë‚˜ ì¼ìš”ì¼ì´ë©´, ê·¸ ì „ í‰ì¼ì— ë¯¸ë¦¬ ë„£ì–´ë“œë¦½ë‹ˆë‹¤.", thought: "ì§€ê¸‰ì¼ ì•ˆë‚´" },
            { q: "êµ­ë¯¼ì—°ê¸ˆì´ë‘ ê°™ì´ ë°›ì•„?", a: "ë„¤, ê°™ì´ ë°›ìœ¼ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤!<br>ë‹¤ë§Œ êµ­ë¯¼ì—°ê¸ˆì„ ë§ì´(ì•½ 50ë§Œ ì› ì´ìƒ) ë°›ìœ¼ì‹œë©´ ê¸°ì´ˆì—°ê¸ˆì´ <b>ì¡°ê¸ˆ ì¤„ì–´ë“¤ ìˆ˜ëŠ” ìˆìŠµë‹ˆë‹¤.</b><br>ì •í™•í•œ ê¸ˆì•¡ì€ ì‹ ì²­í•´ ë´ì•¼ ì••ë‹ˆë‹¤.", thought: "êµ­ë¯¼ì—°ê¸ˆ ì—°ê³„ ì•ˆë‚´" }
        ]
    };

    window.onload = function() {
        addBotMessage(null, "ì•ˆë…•í•˜ì„¸ìš” ì–´ë¥´ì‹ ! ğŸ™‡â€â™‚ï¸<br>ì €ëŠ” ì–´ë¥´ì‹ ì˜ ê¸°ì´ˆì—°ê¸ˆ ê¶ê¸ˆì¦ì„ í’€ì–´ë“œë¦´ <b>'ì—°ê¸ˆ ì‚ì•½ì´'</b>ì…ë‹ˆë‹¤.<br><br>ë§ì´ ë„ˆë¬´ ì–´ë µì£ ? ì œê°€ ì‰½ê²Œ ì„¤ëª…í•´ ë“œë¦´ê²Œìš”.<br>ì•„ë˜ <b>[ğŸ“š ì§ˆë¬¸ ëª©ë¡ ë³´ì—¬ì¤˜]</b> ë²„íŠ¼ì„ í•œë²ˆ ëˆŒëŸ¬ë³´ì„¸ìš”!");
    };

    function sendMenu(text) {
        addUserMessage(text);
        setTimeout(() => processBotResponse(text), 500);
    }

    function sendMessage() {
        const input = document.getElementById('userInput');
        const text = input.value.trim();
        if (text === "") return;
        addUserMessage(text);
        input.value = "";
        setTimeout(() => processBotResponse(text), 600);
    }

    function addUserMessage(text) {
        const row = document.createElement('div');
        row.className = 'msg-row user';
        const bubble = document.createElement('div');
        bubble.className = 'message user-message';
        bubble.innerHTML = text;
        bubble.style.animation = "fadeIn 0.3s";
        row.appendChild(bubble);
        chatBox.appendChild(row);
        scrollToBottom();
    }

    function addBotMessage(thoughtText, answerHtml) {
        if (thoughtText) {
            const thoughtDiv = document.createElement('div');
            thoughtDiv.className = 'thought-container';
            thoughtDiv.innerHTML = `<div class="thought-bubble">â˜ï¸ ${thoughtText}</div>`;
            chatBox.appendChild(thoughtDiv);
        }
        const row = document.createElement('div');
        row.className = 'msg-row';
        const icon = document.createElement('div');
        icon.className = 'bot-icon';
        icon.innerText = "ğŸ¥";
        const bubble = document.createElement('div');
        bubble.className = 'message bot-message';
        bubble.innerHTML = answerHtml;
        bubble.style.animation = "fadeIn 0.4s";
        row.appendChild(icon);
        row.appendChild(bubble);
        chatBox.appendChild(row);
        scrollToBottom();
    }

    // UI: ì¹´í…Œê³ ë¦¬ ë²„íŠ¼ ë³´ì—¬ì£¼ê¸°
    function showCategories() {
        addUserMessage("ì§ˆë¬¸ ëª©ë¡ ë³´ì—¬ì¤˜.");
        
        setTimeout(() => {
            const row = document.createElement('div');
            row.className = 'msg-row';
            const icon = document.createElement('div');
            icon.className = 'bot-icon';
            icon.innerText = "ğŸ¥";
            
            const bubble = document.createElement('div');
            bubble.className = 'message bot-message';
            bubble.style.width = "100%";
            bubble.innerHTML = "ê°€ì¥ ë§ì´ ë¬¼ì–´ë³´ì‹œëŠ” ë‚´ìš©ë“¤ì…ë‹ˆë‹¤.<br>ê¶ê¸ˆí•œ ì£¼ì œë¥¼ ëˆŒëŸ¬ë³´ì„¸ìš”! ğŸ‘‡";
            
            const grid = document.createElement('div');
            grid.className = 'menu-grid';
            
            Object.keys(categories).forEach(cat => {
                const btn = document.createElement('button');
                btn.className = 'category-btn';
                btn.innerText = cat;
                btn.onclick = () => showSubQuestions(cat);
                grid.appendChild(btn);
            });

            bubble.appendChild(grid);
            row.appendChild(icon);
            row.appendChild(bubble);
            chatBox.appendChild(row);
            scrollToBottom();
        }, 500);
    }

    // UI: ì„¸ë¶€ ì§ˆë¬¸ ë¦¬ìŠ¤íŠ¸ ë³´ì—¬ì£¼ê¸°
    function showSubQuestions(category) {
        addUserMessage(category + " ê´€ë ¨ ì§ˆë¬¸");
        
        setTimeout(() => {
            const row = document.createElement('div');
            row.className = 'msg-row';
            const icon = document.createElement('div');
            icon.className = 'bot-icon';
            icon.innerText = "ğŸ¥";
            
            const bubble = document.createElement('div');
            bubble.className = 'message bot-message';
            bubble.style.width = "100%";
            bubble.innerHTML = `<b>[${category}]</b> ê´€ë ¨ ì§ˆë¬¸ë“¤ì…ë‹ˆë‹¤.`;
            
            const list = document.createElement('div');
            list.className = 'question-list';
            
            categories[category].forEach(item => {
                const btn = document.createElement('button');
                btn.className = 'q-btn';
                btn.innerText = "Q. " + item.q;
                btn.onclick = () => {
                    addUserMessage(item.q); 
                    setTimeout(() => addBotMessage(item.thought, item.a), 500); 
                };
                list.appendChild(btn);
            });

            // ìƒë‹´ì› ì—°ê²° ë²„íŠ¼ (ê°€ì¥ ì¤‘ìš”í•œ íƒˆì¶œêµ¬)
            const contactBtn = document.createElement('button');
            contactBtn.className = 'q-btn q-btn-special';
            contactBtn.innerText = "ğŸ“ ìƒë‹´ì›ì´ë‘ ì§ì ‘ í†µí™”í• ë˜";
            contactBtn.onclick = () => {
                addUserMessage("ìƒë‹´ì›ì´ë‘ í†µí™”í•˜ê³  ì‹¶ì–´.");
                setTimeout(() => addBotMessage("ìƒë‹´ì› ì—°ê²° ì•ˆë‚´", "ë‹µë‹µí•˜ì‹œì£ ? ğŸ˜¥<br>ê·¸ë ‡ë‹¤ë©´ <b>êµ­ë¯¼ì—°ê¸ˆê³µë‹¨ 1355</b>ë¡œ ì „í™”í•´ ë³´ì„¸ìš”!<br>ë˜ëŠ” ì‚¬ì‹œëŠ” ê³³ <b>ì£¼ë¯¼ì„¼í„°</b>ë¡œ ê°€ì‹œë©´ ë‹´ë‹¹ìê°€ ìì„¸íˆ ë´ë“œë¦´ ê²ë‹ˆë‹¤."), 500);
            };
            list.appendChild(contactBtn);

            bubble.appendChild(list);
            row.appendChild(icon);
            row.appendChild(bubble);
            chatBox.appendChild(row);
            scrollToBottom();
        }, 500);
    }

    function scrollToBottom() {
        chatBox.scrollTop = chatBox.scrollHeight;
    }

    function updateMenu(options) {
        const menuArea = document.getElementById('menuArea');
        menuArea.innerHTML = ''; 
        options.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = 'menu-btn';
            btn.innerText = opt;
            btn.onclick = () => {
                if(opt === "ğŸ“š ì§ˆë¬¸ ëª©ë¡ ë³´ì—¬ì¤˜") showCategories();
                else sendMenu(opt);
            };
            menuArea.appendChild(btn);
        });
    }

    // ğŸ§  ì±—ë´‡ ë¡œì§
    function processBotResponse(text) {
        if (text === "ğŸ“š ì§ˆë¬¸ ëª©ë¡ ë³´ì—¬ì¤˜" || text.includes("ëª©ë¡")) {
            showCategories();
            return;
        }

        if (step > 0) {
            handleCalculator(text);
            return;
        }
        
        if (["ì–¼ë§ˆ", "ë°›ì„ ìˆ˜", "ê³„ì‚°", "ê¸ˆì•¡"].some(k => text.includes(k))) {
            step = 1;
            addBotMessage("ê°€êµ¬ ìœ í˜• í™•ì¸", "ê³„ì‚°ì„ ë„ì™€ë“œë¦´ê²Œìš”! ğŸ§®<br>í˜¹ì‹œ <b>í˜¼ì ì‚¬ì‹œë‚˜ìš”(ë‹¨ë…), ì•„ë‹ˆë©´ ë°°ìš°ìê°€ ìˆìœ¼ì‹ ê°€ìš”(ë¶€ë¶€)?</b>");
            updateMenu(["í˜¼ì ì‚´ì•„", "ë°°ìš°ì ìˆì–´", "ì²˜ìŒìœ¼ë¡œ"]);
            return;
        }
        
        // í…ìŠ¤íŠ¸ ê²€ìƒ‰ (ì¹´í…Œê³ ë¦¬ + í‚¤ì›Œë“œ)
        let found = false;
        
        Object.keys(categories).forEach(cat => {
            categories[cat].forEach(item => {
                const cleanQ = item.q.replace("?", "");
                if (text.includes(cleanQ)) { addBotMessage(item.thought, item.a); found = true; return; }
                
                if(!found) {
                    if(text.includes("ë¹š") && item.q.includes("ë¹š")) { addBotMessage(item.thought, item.a); found = true; }
                    else if(text.includes("ì´ì‚¬") && item.q.includes("ì´ì‚¬")) { addBotMessage(item.thought, item.a); found = true; }
                    else if(text.includes("í†µì¥") && item.q.includes("í†µì¥")) { addBotMessage(item.thought, item.a); found = true; }
                    else if(text.includes("ì•„íŒŒ") && item.q.includes("ì•„íŒŒ")) { addBotMessage(item.thought, item.a); found = true; }
                    else if(text.includes("ì£¼ì†Œ") && item.q.includes("ì£¼ì†Œ")) { addBotMessage(item.thought, item.a); found = true; }
                    else if(text.includes("ì´í˜¼") && item.q.includes("ì´í˜¼")) { addBotMessage(item.thought, item.a); found = true; }
                    else if(text.includes("ì°¨") && item.q.includes("ìë™ì°¨")) { addBotMessage(item.thought, item.a); found = true; }
                    else if(text.includes("ìì‹") && item.q.includes("ìì‹")) { addBotMessage(item.thought, item.a); found = true; }
                    else if(text.includes("ì‹ ì²­") && item.q.includes("ì‹ ì²­")) { addBotMessage(item.thought, item.a); found = true; }
                    else if(text.includes("ê³µë¬´ì›") && item.q.includes("ê³µë¬´ì›")) { addBotMessage(item.thought, item.a); found = true; }
                }
            });
        });

        if (found) return; 
        
        addBotMessage("ì˜ë„ íŒŒì•… ì¤‘...", "ì£„ì†¡í•©ë‹ˆë‹¤, ì œê°€ ì•„ì§ ë°°ìš°ëŠ” ì¤‘ì´ë¼ ì˜ ëª¨ë¥´ê² ì–´ìš” ğŸ˜…<br><b>[ğŸ“š ì§ˆë¬¸ ëª©ë¡ ë³´ì—¬ì¤˜]</b> ë²„íŠ¼ì„ ëˆŒëŸ¬ì„œ ì°¾ì•„ë³´ì‹œê² ì–´ìš”?");
    }

    function handleCalculator(text) {
        if (step === 1) {
            if (text.includes("í˜¼ì") || text.includes("ë…ê±°")) {
                userType = 'single';
                addBotMessage("2025ë…„ ë‹¨ë… ê¸°ì¤€", "í˜¼ì ì‚¬ì‹œëŠ”êµ°ìš”!<br>2025ë…„ ê¸°ì¤€ <b>228ë§Œ ì›</b>ë³´ë‹¤ ì†Œë“ì´ ì ìœ¼ë©´ ë°›ìœ¼ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br><b>í•œ ë‹¬ ì†Œë“</b>ì´ ëŒ€ëµ ì–¼ë§ˆ ì •ë„ ë˜ì„¸ìš”? (ìˆ«ìë§Œ ì ì–´ì£¼ì„¸ìš”)");
                updateMenu(["ì˜ ëª¨ë¥´ê² ì–´", "ì²˜ìŒìœ¼ë¡œ"]);
                step = 2; 
            } else if (text.includes("ë°°ìš°ì") || text.includes("ë¶€ë¶€") || text.includes("ìˆì–´")) {
                userType = 'couple';
                addBotMessage("2025ë…„ ë¶€ë¶€ ê¸°ì¤€", "ë‘ ë¶„ì´ì‹œêµ°ìš”!<br>ë‘ ë¶„ í•©ì³ì„œ <b>364ë§Œ 8ì²œ ì›</b>ë³´ë‹¤ ì†Œë“ì´ ì ìœ¼ë©´ ë°›ìœ¼ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br><b>ë‘ ë¶„ í•©ì³ì„œ í•œ ë‹¬ ì†Œë“</b>ì´ ì–¼ë§ˆì¸ê°€ìš”?");
                updateMenu(["ì˜ ëª¨ë¥´ê² ì–´", "ì²˜ìŒìœ¼ë¡œ"]);
                step = 2; 
            } else { addBotMessage(null, "í˜¼ì ì‚¬ì‹œëŠ”ì§€, ë°°ìš°ìê°€ ìˆìœ¼ì‹ ì§€ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš” ğŸ¥"); }
            return;
        }
        if (step === 2) {
            if(text.includes("ëª¨ë¥´") || text.includes("ì‘") || text.includes("ê·¸ë˜")) { calculateResult(100); return; }
            const inputNum = parseInt(text.replace(/[^0-9]/g, ''));
            if (!isNaN(inputNum)) { calculateResult(inputNum); } 
            else { addBotMessage(null, "ìˆ«ìë§Œ ì ì–´ì£¼ì„¸ìš” ğŸ˜¢ (ì˜ˆ: 150)"); }
            return;
        }
    }

    function calculateResult(inputNum) {
        const income = inputNum * 10000;
        const limit = userType === 'single' ? LIMIT_SINGLE : LIMIT_COUPLE;
        const limitText = userType === 'single' ? "228ë§Œ ì›" : "364ë§Œ 8ì²œ ì›";
        
        if (income <= limit) addBotMessage("ê³„ì‚° ê²°ê³¼: í•©ê²© ê°€ëŠ¥ì„± ë†’ìŒ", `<b>ì¶•í•˜ë“œë¦½ë‹ˆë‹¤! ë°›ìœ¼ì‹¤ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤!</b> ğŸ‰<br>ë§ì”€í•˜ì‹  ì†Œë“ì´ ê¸°ì¤€(${limitText})ë³´ë‹¤ ì ìœ¼ì‹­ë‹ˆë‹¤.<br>ì •í™•í•œ ê±´ ì‹ ì²­í•´ ë´ì•¼ ì•Œì§€ë§Œ, ê¼­ ì‹ ì²­í•´ ë³´ì„¸ìš”!`);
        else addBotMessage("ê³„ì‚° ê²°ê³¼: ì´ˆê³¼ (í•˜ì§€ë§Œ í™•ì¸ í•„ìš”)", `ìŒ, ë§ì”€í•˜ì‹  ì†Œë“ì´ ê¸°ì¤€(${limitText})ë³´ë‹¤ ì¡°ê¸ˆ ë†’ìœ¼ì‹œë„¤ìš”.<br>í•˜ì§€ë§Œ! <b>ì¬ì‚° ê³µì œë‚˜ ë¶€ì±„ ì°¨ê°</b>ì„ í•˜ë©´ ê°€ëŠ¥í•˜ì‹¤ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.<br>í¬ê¸°í•˜ì§€ ë§ˆì‹œê³  ì£¼ë¯¼ì„¼í„° ê°€ì„œ ìƒë‹´ ë°›ì•„ë³´ì„¸ìš”! ğŸ™`);
        
        step = 0;
        updateMenu(["ğŸ’° ë‚˜ëŠ” ì–¼ë§ˆë‚˜ ë°›ì„ ìˆ˜ ìˆì–´?", "ğŸ“š ì§ˆë¬¸ ëª©ë¡ ë³´ì—¬ì¤˜"]);
    }
</script>

</body>
</html>
