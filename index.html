<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê¸°ì´ˆì—°ê¸ˆ 365 </title>
    <style>
        /* 1. í°íŠ¸: í˜ì´í¼ë¡œì§€ */
        @font-face {
            font-family: 'Paperlogy';
            src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/2408-3@1.0/Paperlogy-5Medium.woff2') format('woff2');
            font-weight: 500;
        }
        @font-face {
            font-family: 'Paperlogy-Bold';
            src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/2408-3@1.0/Paperlogy-7Bold.woff2') format('woff2');
            font-weight: 700;
        }
        
        body {
            font-family: 'Paperlogy', sans-serif;
            background-color: #FFFDF7; 
            background-image: radial-gradient(#E5E0D0 1.5px, transparent 1.5px);
            background-size: 24px 24px;
            margin: 0;
            display: flex;
            justify-content: center;
            height: 100vh;
            overflow: hidden;
        }

        .app-container {
            width: 100%;
            max-width: 500px;
            background: #ffffff;
            display: flex;
            flex-direction: column;
            box-shadow: 0 10px 30px rgba(100, 90, 80, 0.1); 
            border-left: 1px solid #f0f0f0;
            border-right: 1px solid #f0f0f0;
        }

        .header {
            padding: 20px;
            padding-top: 40px;
            background-color: #ffffff;
            border-bottom: 2px dashed #eee;
            text-align: center;
            z-index: 10;
        }
        .header-title {
            font-family: 'Paperlogy-Bold', sans-serif;
            font-size: 1.6rem;
            color: #FF8C00;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        .header-subtitle {
            font-size: 0.95rem;
            color: #888;
            margin-top: 5px;
        }

        .chat-box {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background-color: #FFFDF9;
            scroll-behavior: smooth;
        }

        .msg-row {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
            width: 100%;
        }
        .msg-row.user {
            justify-content: flex-end;
        }

        .bot-icon {
            width: 42px;
            height: 42px;
            background-color: #FFF4E0;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-right: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            flex-shrink: 0;
        }

        .message {
            max-width: 75%;
            padding: 14px 18px;
            border-radius: 20px;
            font-size: 1.05rem;
            line-height: 1.6;
            position: relative;
            word-break: break-word;
            box-shadow: 0 2px 4px rgba(0,0,0,0.03);
        }
        
        .bot-message {
            background-color: #ffffff;
            color: #4a4a4a;
            border: 1px solid #f0f0f0;
            border-top-left-radius: 4px;
        }

        .user-message {
            background-color: #FFB347;
            color: white;
            border-top-right-radius: 4px;
        }

        .thought-container {
            width: 100%;
            display: flex;
            padding-left: 55px;
            margin-bottom: 5px;
        }
        .thought-bubble {
            background-color: #F0F7FF;
            color: #6A9CFF;
            font-size: 0.85rem;
            font-weight: 600;
            padding: 6px 14px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            gap: 6px;
            animation: float 2s infinite ease-in-out;
        }

        /* ë©”ë‰´ ê·¸ë¦¬ë“œ */
        .menu-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-top: 10px;
            width: 100%;
        }
        .category-btn {
            background: #FFF4E0;
            color: #D97706;
            border: 1px solid #FFE0B2;
            padding: 12px;
            border-radius: 12px;
            font-family: 'Paperlogy', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            text-align: center;
        }
        .category-btn:hover { background: #FFD180; }
        
        .question-list {
            display: flex;
            flex-direction: column;
            gap: 6px;
            margin-top: 10px;
            width: 100%;
        }
        .q-btn {
            background: #ffffff;
            border: 1px solid #ddd;
            padding: 10px;
            border-radius: 10px;
            text-align: left;
            font-family: 'Paperlogy', sans-serif;
            font-size: 0.95rem;
            cursor: pointer;
            color: #444;
        }
        .q-btn:hover { background: #f5f5f5; border-color: #FFB347; }
        .q-btn-special {
            background: #FFF0F0;
            border: 1px solid #FFCDCD;
            color: #D32F2F;
            font-weight: bold;
            text-align: center;
        }

        /* í•˜ë‹¨ ê³ ì • ë©”ë‰´ */
        .fixed-menu {
            padding: 12px 15px;
            background: #ffffff;
            border-top: 1px solid #eee;
            display: flex;
            gap: 8px;
            overflow-x: auto;
        }
        .fixed-menu::-webkit-scrollbar { display: none; }

        .menu-btn {
            font-family: 'Paperlogy', sans-serif;
            flex: 1;
            background: #EBF4FF;
            color: #0055FF;
            border: 1px solid #CCE0FF;
            padding: 12px 10px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 600;
            white-space: nowrap;
            min-width: fit-content;
        }
        .menu-btn:hover { background: #D6E4FF; }

        .input-area {
            padding: 15px;
            background: white;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        input[type="text"] {
            flex: 1;
            padding: 15px;
            font-family: 'Paperlogy', sans-serif;
            font-size: 1rem;
            border: 2px solid #eee;
            border-radius: 25px;
            outline: none;
            background-color: #fafafa;
        }
        .send-btn {
            background-color: #FFB347;
            color: white;
            border: none;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-3px); }
            100% { transform: translateY(0px); }
        }
    </style>
</head>
<body>

<div class="app-container">
    <div class="header">
        <h1 class="header-title">ğŸ¥ ê¸°ì´ˆì—°ê¸ˆ 365</h1>
        <div class="header-subtitle">ë¬´ì—‡ì´ë“  ë¬¼ì–´ë³´ì„¸ìš”!</div>
    </div>

    <div class="chat-box" id="chatBox"></div>

    <div class="fixed-menu" id="menuArea">
        <button class="menu-btn" onclick="sendMenu('ë‚˜ëŠ” ì–¼ë§ˆë‚˜ ë°›ì„ ìˆ˜ ìˆì–´?')">ë‚˜ëŠ” ì–¼ë§ˆë‚˜ ë°›ì„ ìˆ˜ ìˆì–´?</button>
        <button class="menu-btn" onclick="showCategories()">ğŸ“š ì§ˆë¬¸ ëª©ë¡ ë³´ì—¬ì¤˜</button>
    </div>

    <div class="input-area">
        <input type="text" id="userInput" placeholder="ê¶ê¸ˆí•œ ê±¸ ì ì–´ì£¼ì„¸ìš”..." onkeypress="if(event.keyCode==13) sendMessage()">
        <button class="send-btn" onclick="sendMessage()">
            <svg viewBox="0 0 24 24" width="22" height="22" fill="white"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
        </button>
    </div>
</div>

<script>
    const chatBox = document.getElementById('chatBox');
    const LIMIT_SINGLE = 2280000;
    const LIMIT_COUPLE = 3648000;

    let step = 0; 
    let userType = ''; 

    // â˜… [ì¹´í…Œê³ ë¦¬ ë°ì´í„°ë² ì´ìŠ¤] - ë¬¸êµ¬ ìˆ˜ì • ì™„ë£Œ
    const categories = {
        "ìê²©/ëŒ€ìƒ": [
            { q: "ëª‡ ì‚´ë¶€í„° ë°›ì„ ìˆ˜ ìˆì–´?", a: "ë§Œ 65ì„¸ ìƒì¼ì´ ì§€ë‚˜ì…”ì•¼ í•©ë‹ˆë‹¤.<br>ì˜¬í•´(2025ë…„)ëŠ” <b>1960ë…„ìƒ</b> ìƒì¼ì´ ì§€ë‚˜ì‹  ë¶„ë“¤ë¶€í„° ëŒ€ìƒì´ì‹­ë‹ˆë‹¤! ğŸ‚", thought: "ìˆ˜ê¸‰ ì—°ë ¹ í™•ì¸" },
            { q: "ìì‹ë“¤ì˜ ìˆ˜ì…ì´ ë§ìœ¼ë©´ ë°›ì„ ìˆ˜ ì—†ì–´?", a: "ê±±ì •í•˜ì§€ ë§ˆì„¸ìš”! ìë…€ë¶„ì´ ì•„ë¬´ë¦¬ ë¶€ìì—¬ë„ <b>ì–´ë¥´ì‹  í˜•í¸ë§Œ ë´…ë‹ˆë‹¤.</b><br>ìë…€ ì†Œë“ì€ ì „í˜€ ìƒê´€ì—†ìŠµë‹ˆë‹¤! ğŸ˜Š", thought: "ë¶€ì–‘ì˜ë¬´ì ê¸°ì¤€ í™•ì¸" },
            { q: "ê³µë¬´ì› ì—°ê¸ˆì„ ë°›ìœ¼ë©´ ë°›ì„ ìˆ˜ ì—†ì–´?", a: "ê³µë¬´ì›, ì‚¬í•™, êµ°ì¸ ì—°ê¸ˆ ë“±ì„ ë°›ê³  ê³„ì‹œë©´ <b>ì›ì¹™ì ìœ¼ë¡œ ê¸°ì´ˆì—°ê¸ˆ ëŒ€ìƒì—ì„œ ì œì™¸ë˜ì‹­ë‹ˆë‹¤.</b><br>ë²•ì ìœ¼ë¡œ ì œí•œë˜ì–´ ìˆì–´ ë„ˆë¬´ ì•„ì‰½ìŠµë‹ˆë‹¤ ğŸ˜¥", thought: "ì§ì—­ì—°ê¸ˆ ì œì™¸ í™•ì¸" },
            { q: "ê¸°ì´ˆìƒí™œìˆ˜ê¸‰ìë„ ë°›ì„ ìˆ˜ ìˆì–´?", a: "ë°›ìœ¼ì‹¤ ìˆ˜ëŠ” ìˆëŠ”ë°, ê¸°ì´ˆì—°ê¸ˆë§Œí¼ <b>ìƒê³„ê¸‰ì—¬ê°€ ê¹ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</b><br>ì˜¤íˆë ¤ ì†í•´ì¼ ìˆ˜ ìˆìœ¼ë‹ˆ ê¼­ ë‹´ë‹¹ìì™€ ìƒë‹´í•´ ë³´ì…”ì•¼ í•©ë‹ˆë‹¤!", thought: "ì¤‘ë³µ ê¸‰ì—¬ ê°ì•¡ í™•ì¸" }
        ],
        "ì¬ì‚°/ì†Œë“": [
            { q: "ìë™ì°¨ê°€ ìˆì–´ë„ ë¼?", a: "ì°¨ëŠ” ìˆìœ¼ì…”ë„ ë©ë‹ˆë‹¤! ë‹¨, <b>4,000ë§Œ ì› ì´ìƒì˜ ê³ ê¸‰ì°¨</b>(3,000cc ì´ìƒ ë“±)ê°€ ìˆìœ¼ë©´ ìˆ˜ê¸‰ì´ ì–´ë ¤ìš°ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ğŸš—", thought: "ì°¨ëŸ‰ê°€ì•¡ ê¸°ì¤€ í™•ì¸" },
            { q: "ì§‘ì´ ìˆì–´ë„ ë¼?", a: "ì§‘ë„ ì†Œë“ìœ¼ë¡œ ê³„ì‚°ë˜ê¸´ í•©ë‹ˆë‹¤.<br>í•˜ì§€ë§Œ <b>ì§€ì—­ë³„ë¡œ(ìµœëŒ€ 1ì–µ 3,500ë§Œ ì›) ì§‘ê°’ì€ ê³µì œ(ì°¨ê°)í•´ë“œë¦¬ë‹ˆ</b> ë„ˆë¬´ ê±±ì • ë§ê³  ì‹ ì²­í•´ ë³´ì„¸ìš”!", thought: "ê¸°ë³¸ì¬ì‚° ê³µì œ í™•ì¸" },
            { q: "ì¼í•´ì„œ ë²„ëŠ” ëˆì€?", a: "ì¼í•´ì„œ ë²„ëŠ” ì›”ê¸‰ì€ <b>110ë§Œ ì›</b>ê¹Œì§€ ì—†ëŠ” ì…ˆ ì³ë“œë¦¬ê³ , ë‚˜ë¨¸ì§€ ëˆë„ <b>30% ë” ê¹ì•„ë“œë¦½ë‹ˆë‹¤.</b><br>ì†Œì¼ê±°ë¦¬ë¥¼ í•˜ì…”ë„ ì¶©ë¶„íˆ ë°›ìœ¼ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤! ğŸ’ª", thought: "ê·¼ë¡œì†Œë“ ê³µì œ í™•ì¸" },
            { q: "í†µì¥ì— ëˆì´ ì¢€ ìˆëŠ”ë°?", a: "ì€í–‰ ì˜ˆê¸ˆì€ <b>2,000ë§Œ ì›ê¹Œì§€ëŠ” ê³µì œ</b>í•´ ë“œë¦½ë‹ˆë‹¤.<br>ê·¸ ì´ìƒì¸ ê¸ˆì•¡ë§Œ ì†Œë“ìœ¼ë¡œ ì¡íˆë‹ˆ ì•ˆì‹¬í•˜ì„¸ìš”.", thought: "ê¸ˆìœµì¬ì‚° ê³µì œ í™•ì¸" }
        ],
        "ì‹ ì²­/ì§€ê¸‰": [
            { q: "ì–´ë””ì„œ ì‹ ì²­í•´?", a: "ì‚¬ì‹œëŠ” ê³³ <b>í–‰ì •ë³µì§€ì„¼í„°(ì£¼ë¯¼ì„¼í„°)</b>ë‚˜ <b>êµ­ë¯¼ì—°ê¸ˆê³µë‹¨</b>ìœ¼ë¡œ ê°€ì‹œë©´ ë©ë‹ˆë‹¤.<br>ì¤€ë¹„ë¬¼ì€ <b>ì‹ ë¶„ì¦</b>ì´ë‘ <b>í†µì¥</b>! ë”± ë‘ ê°œë©´ ë©ë‹ˆë‹¤.", thought: "ì‹ ì²­ ì¥ì†Œ ì•ˆë‚´" },
            { q: "ëˆì€ ë§¤ë‹¬ ëª‡ ì¼ì— ë°›ì•„?", a: "ë§¤ë‹¬ <b>25ì¼</b>ì— ì–´ë¥´ì‹  í†µì¥ìœ¼ë¡œ ì…ê¸ˆë©ë‹ˆë‹¤.<br>25ì¼ì´ íœ´ì¼ì´ë©´ ê·¸ ì „ë‚  ë¯¸ë¦¬ ë„£ì–´ë“œë¦½ë‹ˆë‹¤! ğŸ“…", thought: "ì§€ê¸‰ì¼ ì•ˆë‚´" },
            { q: "í•´ì™¸ì—ì„œ ì¼ì •ê¸°ê°„ ë¨¸ë¬´ë©´ ëª» ë°›ì•„?", a: "í•´ì™¸ì— <b>60ì¼ ì´ìƒ</b> ê³„ì† ë¨¸ë¬´ë¥´ì‹œë©´ ê·¸ ê¸°ê°„ ë™ì•ˆì€ ì§€ê¸‰ì´ ì •ì§€ë©ë‹ˆë‹¤.<br>ê·€êµ­í•˜ì‹œë©´ ë‹¤ì‹œ ë°›ìœ¼ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.", thought: "í•´ì™¸ ì²´ë¥˜ í™•ì¸" },
            { q: "íƒˆë½ í›„ ë¬¸ì˜í•  ë°©ë²•ì´ ìˆì–´?", a: "ê²°ê³¼ê°€ ì–µìš¸í•˜ì‹œë‹¤ë©´ <b>'ì´ì˜ì‹ ì²­'</b>ì„ í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>í†µì§€ì„œ ë°›ì€ ë‚ ë¶€í„° <b>90ì¼ ì´ë‚´</b>ì— ì£¼ë¯¼ì„¼í„°ì— ê°€ì…”ì„œ ë‹¤ì‹œ ê²€í† í•´ë‹¬ë¼ê³  ë§ì”€í•˜ì„¸ìš”.", thought: "ì´ì˜ì‹ ì²­ ì•ˆë‚´" }
        ],
        "ê¸ˆì•¡/ê°ì•¡": [
            { q: "ë¶€ë¶€ê°€ ë‹¤ ë°›ìœ¼ë©´ ì „ì•¡ ë°›ì„ ìˆ˜ ìˆì–´?", a: "ë¶€ë¶€ê°€ ëª¨ë‘ ë°›ìœ¼ì‹œë©´ ìƒí™œë¹„ê°€ ëœ ë“ ë‹¤ê³  í•˜ì—¬ <b>ê°ê° 20%ì”© ê°ì•¡</b>ë©ë‹ˆë‹¤.<br>ê·¸ë˜ë„ ë‘ ë¶„ í•©ì¹˜ë©´ 50ë§Œ ì›ì´ ë„˜ìœ¼ë‹ˆ í˜¼ì ë°›ìœ¼ì‹œëŠ” ê²ƒë³´ë‹¨ ë‚«ìŠµë‹ˆë‹¤!", thought: "ë¶€ë¶€ ê°ì•¡ í™•ì¸" },
            { q: "êµ­ë¯¼ì—°ê¸ˆì´ë‘ ê°™ì´ ë°›ì„ ìˆ˜ ìˆì–´?", a: "ë„¤! ê°™ì´ ë°›ìœ¼ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>ë‹¤ë§Œ êµ­ë¯¼ì—°ê¸ˆ ì•¡ìˆ˜ê°€ ë§ìœ¼ë©´(ì•½ 50ë§Œ ì› ì´ìƒ) ê¸°ì´ˆì—°ê¸ˆì´ <b>ì¡°ê¸ˆ ê¹ì¼ ìˆ˜ëŠ” ìˆìŠµë‹ˆë‹¤.</b>", thought: "êµ­ë¯¼ì—°ê¸ˆ ì—°ê³„ í™•ì¸" },
            { q: "ë³´í†µ ë°›ìœ¼ë©´ ì‚¬ëŒë“¤ì€ ì–´ë””ì— ì“´ëŒ€?", a: "í†µê³„ë¥¼ ë³´ë©´ ì–´ë¥´ì‹ ë“¤ì˜ 80%ê°€ <b>ì‹ë¹„(ìŒ€, ë°˜ì°¬)</b> êµ¬ì…ì— ì“°ì‹ ë‹¤ê³  í•©ë‹ˆë‹¤.<br>ë³‘ì›ë¹„ë¡œ ì“°ì‹ ë‹¤ëŠ” ë¶„ë“¤ë„ ë§ìŠµë‹ˆë‹¤.", thought: "ìˆ˜ê¸‰ì í†µê³„ í™•ì¸" }
        ]
    };

    window.onload = function() {
        addBotMessage(null, "ì•ˆë…•í•˜ì„¸ìš” ì–´ë¥´ì‹ ! ğŸ™‡â€â™‚ï¸<br>ì €ëŠ” 2025ë…„ ê¸°ì´ˆì—°ê¸ˆ ë°•ì‚¬ <b>'ì—°ê¸ˆ ì‚ì•½ì´'</b>ì…ë‹ˆë‹¤.<br><br><b>[ğŸ“š ì§ˆë¬¸ ëª©ë¡ ë³´ì—¬ì¤˜]</b> ë²„íŠ¼ì„ ëˆ„ë¥´ì‹œë©´ ê¶ê¸ˆí•œ ì ì„ ì„ íƒí•´ì„œ ë³´ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
    };

    function sendMenu(text) {
        addUserMessage(text);
        setTimeout(() => processBotResponse(text), 500);
    }

    function sendMessage() {
        const input = document.getElementById('userInput');
        const text = input.value.trim();
        if (text === "") return;
        addUserMessage(text);
        input.value = "";
        setTimeout(() => processBotResponse(text), 600);
    }

    function addUserMessage(text) {
        const row = document.createElement('div');
        row.className = 'msg-row user';
        const bubble = document.createElement('div');
        bubble.className = 'message user-message';
        bubble.innerHTML = text;
        bubble.style.animation = "fadeIn 0.3s";
        row.appendChild(bubble);
        chatBox.appendChild(row);
        scrollToBottom();
    }

    function addBotMessage(thoughtText, answerHtml) {
        if (thoughtText) {
            const thoughtDiv = document.createElement('div');
            thoughtDiv.className = 'thought-container';
            thoughtDiv.innerHTML = `<div class="thought-bubble">â˜ï¸ ${thoughtText}</div>`;
            chatBox.appendChild(thoughtDiv);
        }
        const row = document.createElement('div');
        row.className = 'msg-row';
        const icon = document.createElement('div');
        icon.className = 'bot-icon';
        icon.innerText = "ğŸ¥";
        const bubble = document.createElement('div');
        bubble.className = 'message bot-message';
        bubble.innerHTML = answerHtml;
        bubble.style.animation = "fadeIn 0.4s";
        row.appendChild(icon);
        row.appendChild(bubble);
        chatBox.appendChild(row);
        scrollToBottom();
    }

    // â˜… [UI] ì¹´í…Œê³ ë¦¬ ë²„íŠ¼ ë³´ì—¬ì£¼ê¸°
    function showCategories() {
        addUserMessage("ì§ˆë¬¸ ëª©ë¡ ë³´ì—¬ì¤˜.");
        
        setTimeout(() => {
            const row = document.createElement('div');
            row.className = 'msg-row';
            const icon = document.createElement('div');
            icon.className = 'bot-icon';
            icon.innerText = "ğŸ¥";
            
            const bubble = document.createElement('div');
            bubble.className = 'message bot-message';
            bubble.style.width = "100%";
            bubble.innerHTML = "ì–´ë–¤ ê²Œ ê¶ê¸ˆí•˜ì„¸ìš”? ì•„ë˜ì—ì„œ ì£¼ì œë¥¼ ê³¨ë¼ì£¼ì„¸ìš”! ğŸ‘‡";
            
            const grid = document.createElement('div');
            grid.className = 'menu-grid';
            
            Object.keys(categories).forEach(cat => {
                const btn = document.createElement('button');
                btn.className = 'category-btn';
                btn.innerText = cat;
                btn.onclick = () => showSubQuestions(cat);
                grid.appendChild(btn);
            });

            bubble.appendChild(grid);
            row.appendChild(icon);
            row.appendChild(bubble);
            chatBox.appendChild(row);
            scrollToBottom();
        }, 500);
    }

    // â˜… [UI] ì„¸ë¶€ ì§ˆë¬¸ ë¦¬ìŠ¤íŠ¸ ë³´ì—¬ì£¼ê¸°
    function showSubQuestions(category) {
        addUserMessage(category + " ê´€ë ¨ ì§ˆë¬¸");
        
        setTimeout(() => {
            const row = document.createElement('div');
            row.className = 'msg-row';
            const icon = document.createElement('div');
            icon.className = 'bot-icon';
            icon.innerText = "ğŸ¥";
            
            const bubble = document.createElement('div');
            bubble.className = 'message bot-message';
            bubble.style.width = "100%";
            bubble.innerHTML = `<b>[${category}]</b> ê´€ë ¨í•´ì„œ ë§ì´ ë¬»ëŠ” ì§ˆë¬¸ë“¤ì…ë‹ˆë‹¤.`;
            
            const list = document.createElement('div');
            list.className = 'question-list';
            
            categories[category].forEach(item => {
                const btn = document.createElement('button');
                btn.className = 'q-btn';
                btn.innerText = "Q. " + item.q;
                btn.onclick = () => {
                    addUserMessage(item.q); 
                    setTimeout(() => addBotMessage(item.thought, item.a), 500); 
                };
                list.appendChild(btn);
            });

            // ìƒë‹´ì› ì—°ê²° ë²„íŠ¼ (ë¬¸êµ¬ ìˆ˜ì •ë¨)
            const contactBtn = document.createElement('button');
            contactBtn.className = 'q-btn q-btn-special';
            contactBtn.innerText = "ğŸ“ ìƒë‹´ì› ì—°ê²°í•´ ì§ˆë¬¸í•˜ê¸°";
            contactBtn.onclick = () => {
                addUserMessage("ìƒë‹´ì›ì´ë‘ í†µí™”í•˜ê³  ì‹¶ì–´.");
                setTimeout(() => addBotMessage("ìƒë‹´ì› ì—°ê²° ì•ˆë‚´", "ê·¸ë ‡ë‹¤ë©´ <b>êµ­ë¯¼ì—°ê¸ˆê³µë‹¨ ì½œì„¼í„° 1355</b>ë¡œ ì „í™”í•´ ë³´ì„¸ìš”!<br>ë˜ëŠ” ê°€ê¹Œìš´ ì£¼ë¯¼ì„¼í„°ë¡œ ë°©ë¬¸í•˜ì‹œë©´ ì¹œì ˆí•˜ê²Œ ì•ˆë‚´í•´ ë“œë¦´ ê²ë‹ˆë‹¤. ğŸ˜Š"), 500);
            };
            list.appendChild(contactBtn);

            bubble.appendChild(list);
            row.appendChild(icon);
            row.appendChild(bubble);
            chatBox.appendChild(row);
            scrollToBottom();
        }, 500);
    }

    function scrollToBottom() {
        chatBox.scrollTop = chatBox.scrollHeight;
    }

    function updateMenu(options) {
        const menuArea = document.getElementById('menuArea');
        menuArea.innerHTML = ''; 
        options.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = 'menu-btn';
            btn.innerText = opt;
            btn.onclick = () => {
                if(opt === "ğŸ“š ì§ˆë¬¸ ëª©ë¡ ë³´ì—¬ì¤˜") showCategories();
                else sendMenu(opt);
            };
            menuArea.appendChild(btn);
        });
    }

    // ğŸ§  ì±—ë´‡ ë¡œì§
    function processBotResponse(text) {
        if (text === "ğŸ“š ì§ˆë¬¸ ëª©ë¡ ë³´ì—¬ì¤˜" || text.includes("ëª©ë¡")) {
            showCategories();
            return;
        }

        if (step > 0) {
            handleCalculator(text);
            return;
        }
        
        if (["ì–¼ë§ˆ", "ë°›ì„ ìˆ˜", "ê³„ì‚°", "ê¸ˆì•¡"].some(k => text.includes(k))) {
            step = 1;
            addBotMessage("ê°€êµ¬ ìœ í˜• í™•ì¸", "ë„¤! ì œê°€ ê³„ì‚°í•´ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.<br>í˜¹ì‹œ <b>í˜¼ì ì‚¬ì‹œë‚˜ìš”, ì•„ë‹ˆë©´ ë°°ìš°ìê°€ ìˆìœ¼ì‹ ê°€ìš”?</b>");
            updateMenu(["í˜¼ì ì‚´ì•„", "ë°°ìš°ì ìˆì–´", "ì²˜ìŒìœ¼ë¡œ"]);
            return;
        }
        
        // 2. í…ìŠ¤íŠ¸ ì…ë ¥ ì‹œ ì¹´í…Œê³ ë¦¬ ë‹µë³€ ê²€ìƒ‰
        let found = false;
        
        Object.keys(categories).forEach(cat => {
            categories[cat].forEach(item => {
                const cleanQ = item.q.replace("?", "");
                if (text.includes(cleanQ) || (text.includes(cat) && text.length < 10)) {
                    // ì •í™• ë§¤ì¹­ ì²˜ë¦¬ (í•„ìš”ì‹œ)
                }
                
                if(text.includes("ì°¨") && item.q.includes("ìë™ì°¨")) { addBotMessage(item.thought, item.a); found = true; }
                else if(text.includes("ìì‹") && item.q.includes("ìë…€")) { addBotMessage(item.thought, item.a); found = true; }
                else if(text.includes("ì‹ ì²­") && item.q.includes("ì‹ ì²­")) { addBotMessage(item.thought, item.a); found = true; }
                else if(text.includes("ê³µë¬´ì›") && item.q.includes("ê³µë¬´ì›")) { addBotMessage(item.thought, item.a); found = true; }
                else if(text.includes("ì–¸ì œ") && item.q.includes("ì–¸ì œ")) { addBotMessage(item.thought, item.a); found = true; }
            });
        });

        if (found) return; 
        
        addBotMessage("ì˜ë„ íŒŒì•… ì¤‘...", "ì£„ì†¡í•©ë‹ˆë‹¤, ì œê°€ ì˜ ì•Œì•„ë“£ì§€ ëª»í–ˆìŠµë‹ˆë‹¤ ğŸ˜…<br><b>[ğŸ“š ì§ˆë¬¸ ëª©ë¡ ë³´ì—¬ì¤˜]</b> ë²„íŠ¼ì„ ëˆ„ë¥´ì…”ì„œ ì£¼ì œë¥¼ ê³¨ë¼ë³´ì‹œê² ì–´ìš”?");
    }

    function handleCalculator(text) {
        if (step === 1) {
            if (text.includes("í˜¼ì") || text.includes("ë…ê±°")) {
                userType = 'single';
                addBotMessage("2025ë…„ ë‹¨ë… ê¸°ì¤€", "ì•Œê² ìŠµë‹ˆë‹¤. í˜¼ì ì‚¬ì‹œëŠ” ê²½ìš° <b>228ë§Œ ì›</b>ë³´ë‹¤ ì†Œë“ì´ ì ìœ¼ë©´ ë°›ìœ¼ì‹­ë‹ˆë‹¤.<br><b>í•œ ë‹¬ ì†Œë“</b>ì´ ëŒ€ëµ ì–¼ë§ˆ ì •ë„ ë˜ì‹œë‚˜ìš”? (ìˆ«ìë§Œ)");
                updateMenu(["ì˜ ëª¨ë¥´ê² ì–´", "ì²˜ìŒìœ¼ë¡œ"]);
                step = 2; 
            } else if (text.includes("ë°°ìš°ì") || text.includes("ë¶€ë¶€") || text.includes("ìˆì–´")) {
                userType = 'couple';
                addBotMessage("2025ë…„ ë¶€ë¶€ ê¸°ì¤€", "ì•Œê² ìŠµë‹ˆë‹¤. ë¶€ë¶€ í•©ì³ì„œ <b>364ë§Œ 8ì²œ ì›</b>ë³´ë‹¤ ì†Œë“ì´ ì ìœ¼ë©´ ë°›ìœ¼ì‹­ë‹ˆë‹¤.<br><b>ë‘ ë¶„ í•©ì³ì„œ í•œ ë‹¬ ì†Œë“</b>ì´ ì–¼ë§ˆì¸ê°€ìš”? (ìˆ«ìë§Œ)");
                updateMenu(["ì˜ ëª¨ë¥´ê² ì–´", "ì²˜ìŒìœ¼ë¡œ"]);
                step = 2; 
            } else { addBotMessage(null, "í˜¼ì ì‚¬ì‹œëŠ”ì§€, ë°°ìš°ìê°€ ìˆìœ¼ì‹ ì§€ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš” ğŸ¥"); }
            return;
        }
        if (step === 2) {
            if(text.includes("ëª¨ë¥´") || text.includes("ì‘") || text.includes("ê·¸ë˜")) { calculateResult(100); return; }
            const inputNum = parseInt(text.replace(/[^0-9]/g, ''));
            if (!isNaN(inputNum)) { calculateResult(inputNum); } 
            else { addBotMessage(null, "ìˆ«ìë§Œ ì ì–´ì£¼ì„¸ìš” ğŸ˜¢ (ì˜ˆ: 150)"); }
            return;
        }
    }

    function calculateResult(inputNum) {
        const income = inputNum * 10000;
        const limit = userType === 'single' ? LIMIT_SINGLE : LIMIT_COUPLE;
        const limitText = userType === 'single' ? "228ë§Œ ì›" : "364ë§Œ 8ì²œ ì›";
        
        if (income <= limit) addBotMessage("ê³„ì‚° ê²°ê³¼: í•©ê²©", `<b>ì¶•í•˜ë“œë¦½ë‹ˆë‹¤! ë°›ìœ¼ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤!</b> ğŸ‰<br>ì†Œë“ì´ ê¸°ì¤€(${limitText})ë³´ë‹¤ ì ìœ¼ì‹­ë‹ˆë‹¤.<br>ë§¤ë‹¬ <b>34ë§Œ ì›ëŒ€</b>ë¥¼ ë°›ê²Œ ë˜ì‹¤ ê²ë‹ˆë‹¤.`);
        else addBotMessage("ê³„ì‚° ê²°ê³¼: ì´ˆê³¼", `ì•„ì´ê³ , ê¸°ì¤€(${limitText})ë³´ë‹¤ ì†Œë“ì´ ì¡°ê¸ˆ ë†’ìœ¼ì‹œë„¤ìš”.<br>í•˜ì§€ë§Œ <b>ê³µì œ</b>ë¥¼ ë°›ìœ¼ë©´ ê°€ëŠ¥í•  ìˆ˜ë„ ìˆìœ¼ë‹ˆ ê¼­ ì£¼ë¯¼ì„¼í„°ì— ì‹ ì²­í•´ ë³´ì„¸ìš”!`);
        
        step = 0;
        updateMenu(["ë‚˜ëŠ” ì–¼ë§ˆë‚˜ ë°›ì„ ìˆ˜ ìˆì–´?", "ğŸ“š ì§ˆë¬¸ ëª©ë¡ ë³´ì—¬ì¤˜"]);
    }
</script>

</body>
</html>
